LANSA.addComponent({id:"XEXPHISTO",nm:"xEXPhistory",ot:"wv",tp:"View",de:"Expenses history view",tl:14020004},function(l,oI,u){var cL="ENG";if((l.gCL()=="FRA")||(l.gCL()=="JPN")||(l.gCL()=="LLL")){cL=l.gCL();}var c1=l.cDec("1.87"),c2=l.cDec(".13");var Fd={F1:{nm:"XEXPENSET",an:"xExpenseTotal",ft:"P",ln:7,dc:2,ec:"1",lb:{"ENG":"Expense Total","FRA":"Unit Price","JPN":"Expense Total","LLL":"Expense Total"}[cL],h1:{"ENG":"Expense Total","FRA":"Unit","JPN":"Expense Total","LLL":"Expense Total"}[cL],h2:{"ENG":" ","FRA":"Price","JPN":"","LLL":""}[cL],
h3:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],de:{"ENG":"Expense Total","FRA":"Unit Price","JPN":"Expense Total","LLL":"Expense Total"}[cL],dv:0,ia:["FE","RB"]},F2:{nm:"STD_INT",ft:"I",ln:4,dc:0,ec:"J",lb:{"ENG":"Std Integer","FRA":"?","JPN":"?","LLL":"Std Integer"}[cL],h1:{"ENG":"Standard","FRA":"?","JPN":"?","LLL":"Standard"}[cL],h2:{"ENG":"Integer","FRA":"?","JPN":"?","LLL":"Integer"}[cL],h3:{"ENG":"Field","FRA":"?","JPN":"?","LLL":"Field"}[cL],de:{"ENG":"Standard Integer field","FRA":"?","JPN":"?","LLL":"Standard Integer field"}[cL],
dv:0,ia:["FE","RB"]},F3:{nm:"STD_NVARC",ft:"NV",ln:512,dc:0,lb:{"ENG":"Std NVarChar","FRA":"?","JPN":"?","LLL":"Std NVarChar"}[cL],h1:{"ENG":"Standard","FRA":"?","JPN":"?","LLL":"Standard"}[cL],h2:{"ENG":"unicode","FRA":"?","JPN":"?","LLL":"unicode"}[cL],h3:{"ENG":"varchar","FRA":"?","JPN":"?","LLL":"varchar"}[cL],de:{"ENG":"Standard unicode varchar","FRA":"?","JPN":"?","LLL":"Standard unicode varchar"}[cL],dv:"",ia:["FE"]}};var cO=l.rC(oI,{an:"PRIM_VIEW",fd:Fd,rm:["dt"],pt:{uFilterExpensesBy:{da:"rw"
}},mt:{Refresh:{},ShowStatus:{ps:{"StatusText":{pt:"i"}}},HideStatus:{}},ev:{uShowHistory:{ps:{"sortcriteria":{pt:"i"}}}},co:function(){cO.aN.call(this);this.aF("XEXPHISTO",Fd);var C0=this.cR("STYLESORTORDER","PRIM_VS","Style");var C1=this.cR("STYLESEARCHPANEL","PRIM_VS","Style");var C2=this.cR("BRUSH8","PRIM_VS","SolidBrush");var C3=this.cR("BRUSH2","PRIM_VS","SolidBrush");var C4=this.cR("BRUSH6","PRIM_VS","SolidBrush");var C5=this.cR("BRUSH5","PRIM_VS","SolidBrush");var C6=this.cR("BRUSH4","PRIM_VS","SolidBrush");
var C7=this.cR("STYLELOGOTEXT","PRIM_VS","Style");var C8=this.cR("BRUSH1","PRIM_VS","SolidBrush");var C9=this.cR("STYLESEARCHVALUE","PRIM_VS","Style");var C10=this.cR("BRUSHSEARCHVALUE","PRIM_VS","SolidBrush");var C11=this.cR("STYLELOADING","PRIM_VS","Style");var C12=this.cR("STYLERESULTS","PRIM_VS","Style");var C13=this.cR("LAYOUTMAIN","PRIM_TBLO");var C14=this.cR("COLUMN1MAIN","PRIM_TBLO","Column");var C15=this.cR("ROW3MAIN","PRIM_TBLO","Row");var C16=this.cR("LAYOUTMAINROW1","PRIM_TBLO","Row");
var C17=this.cR("LAYOUTITEM4","PRIM_TBLO","Item");var C18=this.cR("LAYOUTITEM11","PRIM_TBLO","Item");var C19=this.cR("LAYOUTMAINITEM1","PRIM_TBLO","Item");var C20=this.cR("LAYOUTMAINITEM2","PRIM_TBLO","Item");var C21=this.cR("CARDLIST","PRIM_TREE");var C22=this.cR("LABELSTATUS","PRIM_LABL");var C23=this.cR("PAIDSWITCH","PRIM_MD","Switch");var C24=this.cR("SUBMITTEDSWITCH","PRIM_MD","Switch");var C25=this.cA("APPLICATION","XEXPAPPL");var C26=this.cR("REFRESHTIMER","PRIM_TIMR");var C27=this.cR("FILTEREXPENSES","PRIM_ALPH");
var C28=this.cR("LABELSORT","PRIM_ALPH");C0.setFontSize(12);C0.setFontUnits("PIXEL");C0.iC();C1.setBackgroundBrush(C4);C1.setBorderTop(1);C1.setBorderBottom(0);C1.setBorderLeft(0);C1.setBorderRight(0);C1.setBorderBrush(C2);C1.iC();C2.setColor("74:74:74");C2.iC();C3.setColor("THEMEBORDER");C3.iC();C4.setColor("0:0:0");C4.iC();C5.setColor("THEME400");C5.iC();C6.setColor("THEME600");C6.iC();C7.setFontSize(12);C7.setFontUnits("PIXEL");C7.setItalic(true);C7.setForegroundBrush(C8);C7.iC();C8.setColor("THEME50");
C8.iC();C9.setForegroundBrush(C10);C9.setBorderBottom(0);C9.setBorderLeft(0);C9.setBorderRight(0);C9.setBorderTop(0);C9.iC();C10.setColor("THEMETEXT");C10.iC();C11.setFontSize(14);C11.setFontUnits("PIXEL");C11.setItalic(false);C11.iC();C12.setFontSize(12);C12.setFontUnits("PIXEL");C12.iC();C13.iC();C14.setDisplayPosition(1);C14.setParent(C13);C14.iC();C15.setDisplayPosition(2);C15.setParent(C13);C15.setHeight(c1);C15.iC();C16.setDisplayPosition(1);C16.setParent(C13);C16.setHeight(c2);C16.iC();C17.setColumn(C14);
C17.setManage(C21);C17.setParent(C13);C17.setRow(C15);C17.iC();C18.setColumn(C14);C18.setManage(C22);C18.setParent(C13);C18.setRow(C15);C18.iC();C19.setManage(C23);C19.setParent(C13);C19.setRow(C16);C19.setSizing("NONE");C19.setColumn(C14);C19.setFlow("CENTERHORIZONTAL");C19.setMarginTop(10);C19.setMarginBottom(10);C19.iC();C20.setManage(C24);C20.setParent(C13);C20.setRow(C16);C20.setSizing("NONE");C20.setColumn(C14);C20.setFlow("CENTERHORIZONTAL");C20.setMarginTop(5);C20.setMarginBottom(5);C20.iC();
C21.setDisplayPosition(2);C21.setTabPosition(1);C21.setHeight(666);C21.setLeft(0);C21.setWidth(594);C21.setParent(this);C21.setTop(47);C21.iC();C22.setDisplayPosition(1);C22.setEllipses("WORD");C22.setHeight(666);C22.setLeft(0);C22.setTabPosition(2);C22.setTabStop(false);C22.setVerticalAlignment("CENTER");C22.setWidth(594);C22.setAlignment("CENTER");C22.setParent(this);C22.setTop(47);C22.iC();C23.setCaption("Paid Items");C23.setChecked(true);C23.setDisplayPosition(3);C23.setIconColor("THEMEACCENTMEDIUM");
C23.setLeft(148);C23.setParent(this);C23.setTabPosition(3);C23.setTop(8);C23.setWidth(130);C23.setCaptionMarginLeft(5);C23.iC();C24.setCaption("Submitted Items");C24.setChecked(true);C24.setDisplayPosition(4);C24.setIconColor("THEMEACCENTMEDIUM");C24.setLeft(278);C24.setParent(this);C24.setTabPosition(4);C24.setTop(8);C24.setWidth(168);C24.setCaptionMarginLeft(5);C24.iC();if((C25!=null)&&(C25.iI()==false)){C25.iC();}C26.setStartup("MANUAL");C26.setInterval(25);C26.iC();C27.iC();C28.setValue("by date");
C28.iC();C23.aH("CHANGED",this,e8);C24.aH("CHANGED",this,e8);C25.aH("UHISTORYREADY",this,e2);C25.aH("UREFRESHHISTORYEXPENSES",this,e2);C25.aH("SEARCHMODEON",this,e3);C25.aH("SEARCHCLEARED",this,e4);C25.aH("SEARCHMODEOFF",this,e5);C25.aH("SEARCHCOMPLETED",this,e7);C26.aH("TICK",this,e6);C21.aDS("XEXPCARD");C21.aLF({});this.setLayoutManager(C13);this.setDisplayPosition(1);this.setHeight(713);this.setWidth(594);this.setTabPosition(1);this.aH("CREATEINSTANCE",this,e1);}});function e1(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#com_owner.CreateInstance",52);
r.ln=52;{r.ln=53;m.FILTEREXPENSES.set("");}r.ln=54;r.e();};function e2(sender,Ps){var r=l.eR(this,cO,"#Application.uHistoryReady #Application.uRefreshHistoryExpenses",56);r.ln=56;{r.ln=58;this.mthREFRESH();}r.ln=60;r.e();};function e3(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#Application.SearchModeOn",62);r.ln=62;{r.ln=64;m.CARDLIST.setVisible(false);}r.ln=66;r.e();};function e4(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#Application.SearchCleared",68);r.ln=68;{r.ln=70;m.CARDLIST.setVisible(false);
r.ln=72;this.mthHIDESTATUS();}r.ln=74;r.e();};function e5(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#Application.SearchModeOff",76);r.ln=76;{r.ln=78;m.CARDLIST.setVisible(true);}r.ln=80;r.e();};function e6(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#RefreshTimer.Tick",82);var C0=r.cR("CARDSBYCAPTION","PRIM_KCOL");var C1=r.cR("CAPTION","PRIM_DC","UnicodeString");var C2=r.cR("CAPTIONRIGHT","PRIM_DC","UnicodeString");var C3=r.cR("IDENTIFIER","PRIM_DC","UnicodeString");var C4=r.cR("SORTDIRECTION","PRIM_DC","UnicodeString");
var C5=r.cF("CATEGORYSUM",Fd.F1.Dc);C0.setStyle("COLLECTION");C0.setCollects("XEXPCARD");C0.setKeyedBy(Fd.F3.Dc);C0.iC();C1.iC();C2.iC();C3.iC();C4.setValue("Ascending");C4.iC();C5.iC();r.ln=82;{r.ln=92;m.REFRESHTIMER.mthSTOP();r.ln=94;m.CARDLIST.clearList();r.ln=96;C5.set(0);r.ln=98;{var l1=m.APPLICATION.ref.getEXPENSES().cI();while(l1.step()){var EXPENSEDETAIL=r.sR("EXPENSEDETAIL",l1.item());r.ln=100;if(l.tB(l.s.ne(m.FILTEREXPENSES.get(),""))){r.ln=102;if(l.tB(l.s.ne(l.s.UpperCase(EXPENSEDETAIL.getUEXPENSESTATUS()),m.FILTEREXPENSES.get())))
{continue;}}r.ln=106;{var v1=m.APPLICATION.ref.getUSORTING();if(r.ln=108,l.s.eq(v1,"category")){r.ln=110;EXPENSEDETAIL.setUSHOWCATEGORY(false);r.ln=111;C1.set(EXPENSEDETAIL.getUCATEGORYDESCRIPTION());C3.set(EXPENSEDETAIL.getUCATEGORYDESCRIPTION());r.ln=112;m.LABELSORT.set("by category");r.ln=113;C5.set(EXPENSEDETAIL.getULINETOTAL());}else{r.ln=118;EXPENSEDETAIL.setUSHOWCATEGORY(true);r.ln=119;C1.set(l.cat(l.cat(l.d.AsDisplayString(EXPENSEDETAIL.getUDATE(),"MMMMMMMMMM"),", "),l.n.AsString(l.d.Year(EXPENSEDETAIL.getUDATE()))));
r.ln=120;C3.set(l.d.AsDisplayString(EXPENSEDETAIL.getUDATE(),"CCYYMM"));r.ln=121;C4.set("Descending");r.ln=122;C5.set(EXPENSEDETAIL.getULINETOTAL());r.ln=123;m.LABELSORT.set("by date");}r.ln=124;}r.ln=126;if((C0.get(C1.get())==null)){r.ln=128;m.CARDLIST.addEntry();r.ln=130;C0.set(C1.get(),l.cast(m.CARDLIST.getCurrentItem().getDesign(),"XEXPCARD"));r.ln=132;C0.get(C1.get()).setSUMOFLINEITEMS(C5.get());r.ln=133;C0.get(C1.get()).setCAPTIONRIGHT(l.cat("$",l.n.AsDisplayString(C5.get(),7,2)));r.ln=134;
C0.get(C1.get()).setCAPTION(C1.get());r.ln=135;C0.get(C1.get()).setIDENTIFIER(C3.get());r.ln=136;C0.get(C1.get()).setCARDTYPE(m.LABELSORT.get());}else{r.ln=139;C0.get(C1.get()).setSUMOFLINEITEMS(l.add(C0.get(C1.get()).getSUMOFLINEITEMS(),C5.get()));r.ln=140;C0.get(C1.get()).setCAPTIONRIGHT(l.cat("$",l.n.AsDisplayString(C0.get(C1.get()).getSUMOFLINEITEMS(),9,2)));}r.ln=143;C0.get(C1.get()).mthADDNEWEXPENSECARD(EXPENSEDETAIL);r.ln=145;}l1.end();r.dR("EXPENSEDETAIL");}r.ln=147;this.mthHIDESTATUS();r.ln=149;
m.CARDLIST.mthSORT("Identifier",C4.get());r.ln=151;m.CARDLIST.setParent(this);r.ln=153;if(l.b.Not(this.getIsActiveView())){r.ln=154;{var eP=l.ePs();eP.cR("SORTCRITERIA","PRIM_ALPH");eP.r("SORTCRITERIA").set(m.APPLICATION.ref.getUSORTING());this.fE("USHOWHISTORY",eP);eP.e();}}r.ln=157;m.CARDLIST.setVisible(true);}r.ln=159;r.e();};function e7(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#Application.SearchCompleted",161);var P0=Ps.r("RESULTS");r.ln=161;{r.ln=163;if(l.n.eq(P0.get(),0)){r.ln=165;cO.mthSHOWSTATUS.call(this,"NO SEARCH RESULTS");
}r.ln=169;m.CARDLIST.setVisible(true);}r.ln=171;r.e();};cO.mthREFRESH=function(){var m=this.REF,r=l.mR(this,cO,"Refresh",177);r.ln=177;{r.ln=179;m.CARDLIST.setParent(null);r.ln=181;cO.mthSHOWSTATUS.call(this,"LOADING...");r.ln=183;m.REFRESHTIMER.mthSTART();}r.ln=185;r.e();};cO.mthSHOWSTATUS=function(p0){var m=this.REF,r=l.mR(this,cO,"ShowStatus",187);var P0=r.cP("STATUSTEXT","PRIM_DC","UnicodeString");P0.set(p0);r.ln=187;{r.ln=190;m.LABELSTATUS.set(P0.get());r.ln=192;m.LABELSTATUS.setParent(this);
}r.ln=194;r.e();};cO.mthHIDESTATUS=function(){var m=this.REF,r=l.mR(this,cO,"HideStatus",196);r.ln=196;{r.ln=198;m.LABELSTATUS.setParent(null);}r.ln=200;r.e();};function e8(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#PaidSwitch.Changed #SubmittedSwitch.Changed",202);r.ln=202;{r.ln=204;if(l.and(m.PAIDSWITCH.getChecked(),m.SUBMITTEDSWITCH.getChecked())){r.ln=205;m.FILTEREXPENSES.set("");}else{r.ln=207;if(m.PAIDSWITCH.getChecked()){r.ln=208;m.FILTEREXPENSES.set("PAID");}else{r.ln=210;m.FILTEREXPENSES.set("SUBMITTED");
}}r.ln=214;this.mthREFRESH();}r.ln=216;r.e();};cO.getUFILTEREXPENSESBY=function(){return this.REF.FILTEREXPENSES.get();};cO.setUFILTEREXPENSESBY=function(v){this.REF.FILTEREXPENSES.set(v);};{Fd.F1.Dc=function(){this.aN.call(this,Fd.F1);};l.cFC({co:Fd.F1.Dc,an:"PRIM_FLD",fn:"XEXPENSET"});}{Fd.F2.Dc=function(){this.aN.call(this,Fd.F2);};l.cFC({co:Fd.F2.Dc,an:"PRIM_FLD",fn:"STD_INT"});}{Fd.F3.Dc=function(){this.aN.call(this,Fd.F3);};l.cFC({co:Fd.F3.Dc,an:"PRIM_FLD",fn:"STD_NVARC"});}},{rc:["XEXPAPPL"],
rp:["PRIM_VIEW","PRIM_VS.Style","PRIM_VS.SolidBrush","PRIM_TBLO","PRIM_TBLO.Column","PRIM_TBLO.Row","PRIM_TBLO.Item","PRIM_TREE","PRIM_LABL","PRIM_MD.Switch","PRIM_TIMR","PRIM_ALPH","PRIM_FLD","PRIM_DTIM"],dc:["XEXPCARD"],dp:["PRIM_KCOL","PRIM_DC.UnicodeString"]});