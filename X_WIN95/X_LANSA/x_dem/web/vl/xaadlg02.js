LANSA.addComponent({id:"XAADLG02",nm:"xAACameraDialog",ot:"wv",tp:"Dialog",de:"Camera Dialog",tl:14020008},function(l,oI,u){var c1=l.cDec("1.82"),c2=l.cDec("1.7");var cO=l.rC(oI,{an:"PRIM_DLG",pt:{CameraInitialized:{da:"r"}},mt:{CapturePicture:{ps:{"SaveImageToGallery":{pt:"i"}}},CaptureVideo:{ps:{"SaveImageToGallery":{pt:"i"}}},SelectFromGallery:{},AnnotateImage:{ps:{"SaveImageToGallery":{pt:"i"}}},ActivateDeviceCamera:{ps:{"Source":{pt:"i"},"EnableImage":{pt:"i"},"EnableVideo":{pt:"i"},"EnableAnnotation":
{pt:"i"},"SaveToGallery":{pt:"i"}}},CalculateDimensions:{},GetFileBase64:{ps:{"FilePath":{pt:"i"}}}},ev:{Complete:{ps:{"File":{pt:"i"},"Base64Data":{pt:"i"},"MimeType":{pt:"i"}}},Failed:{ps:{"Result":{pt:"i"}}},SettingMegapixels:{ps:{"MegaPixels":{pt:"o"}}},SettingVideoQuality:{ps:{"VideoQuality":{pt:"o"}}}},co:function(){cO.aN.call(this);var C0=this.cR("STYLE1","PRIM_VS","Style");var C1=this.cR("BRUSH1","PRIM_VS","SolidBrush");var C2=this.cR("STYLE2","PRIM_VS","Style");var C3=this.cR("BRUSH2","PRIM_VS","SolidBrush");
var C4=this.cR("LAYOUTHEADER","PRIM_TBLO");var C5=this.cR("COLUMN1","PRIM_TBLO","Column");var C6=this.cR("ROW1","PRIM_TBLO","Row");var C7=this.cR("ROW2","PRIM_TBLO","Row");var C8=this.cR("LAYOUT1ITEM1","PRIM_TBLO","Item");var C9=this.cR("LAYOUT1ITEM2","PRIM_TBLO","Item");var C10=this.cR("LAYOUTCONTENT","PRIM_TBLO");var C11=this.cR("COLUMN2","PRIM_TBLO","Column");var C12=this.cR("COLUMN3","PRIM_TBLO","Column");var C13=this.cR("ROW3","PRIM_TBLO","Row");var C14=this.cR("LAYOUT2ITEM1","PRIM_TBLO","Item");
var C15=this.cR("LAYOUT2ITEM2","PRIM_TBLO","Item");var C16=this.cR("LAYOUT3","PRIM_TBLO");var C17=this.cR("COLUMN4","PRIM_TBLO","Column");var C18=this.cR("COLUMN5","PRIM_TBLO","Column");var C19=this.cR("COLUMN6","PRIM_TBLO","Column");var C20=this.cR("COLUMN7","PRIM_TBLO","Column");var C21=this.cR("ROW4","PRIM_TBLO","Row");var C22=this.cR("ROW5","PRIM_TBLO","Row");var C23=this.cR("ROW6","PRIM_TBLO","Row");var C24=this.cR("ROW7","PRIM_TBLO","Row");var C25=this.cR("LAYOUT3ITEM1","PRIM_TBLO","Item");
var C26=this.cR("LAYOUT3ITEM2","PRIM_TBLO","Item");var C27=this.cR("LAYOUT3ITEM3","PRIM_TBLO","Item");var C28=this.cR("LAYOUT3ITEM4","PRIM_TBLO","Item");var C29=this.cR("LAYOUT3ITEM5","PRIM_TBLO","Item");var C30=this.cR("LAYOUTHEADERITEM1","PRIM_TBLO","Item");var C31=this.cR("CONTENTPANEL","PRIM_PANL");var C32=this.cR("HEADER","PRIM_PANL");var C33=this.cR("ICONBACK","PRIM_MD","Icon");var C34=this.cR("HEADING","PRIM_MD","Label");var C35=this.cR("BUTTONPHOTO","PRIM_MD","ActionButton");var C36=this.cR("BUTTONVIDEO","PRIM_MD","ActionButton");
var C37=this.cR("BUTTONGALLERY","PRIM_MD","ActionButton");var C38=this.cR("BUTTONANNOTATE","PRIM_MD","ActionButton");var C39=this.cR("SWITCHSAVETODEVICE","PRIM_MD","Switch");var C40=this.cR("CAMERA","XDEVICE04");var C41=this.cR("FILEREAD","XDEVICE06");var C42=this.cR("IMAGENUMBER","PRIM_NMBR");var C43=this.cR("CAMERAINITIALISED","PRIM_BOLN");var C44=this.cR("IMAGEHEIGHT","PRIM_NMBR");var C45=this.cR("IMAGEWIDTH","PRIM_NMBR");var C46=this.cR("MIMETYPE","PRIM_STR");C0.setBackgroundBrush(C1);C0.iC();
C1.setColor("255:255:255");C1.iC();C2.setCornerBottomLeft(0);C2.setCornerBottomRight(0);C2.setCornerTopLeft(0);C2.setCornerTopRight(0);C2.setBorderLeft(1);C2.setBorderTop(1);C2.setBorderRight(1);C2.setBorderBottom(1);C2.setBackgroundBrush(C3);C2.iC();C3.setColor("THEME700");C3.iC();C4.iC();C5.setDisplayPosition(1);C5.setParent(C4);C5.iC();C6.setDisplayPosition(1);C6.setParent(C4);C6.setHeight(48);C6.setUnits("PIXELS");C6.iC();C7.setDisplayPosition(2);C7.setParent(C4);C7.setHeight(c1);C7.iC();C8.setAlignment("TOPLEFT");
C8.setColumn(C5);C8.setManage(C32);C8.setParent(C4);C8.setRow(C6);C8.iC();C9.setManage(C31);C9.setParent(C4);C9.setRow(C7);C9.setColumn(C5);C9.iC();C10.iC();C11.setDisplayPosition(1);C11.setParent(C10);C11.setWidth(48);C11.setUnits("PIXELS");C11.iC();C12.setDisplayPosition(2);C12.setParent(C10);C12.setWidth(c2);C12.iC();C13.setDisplayPosition(1);C13.setParent(C10);C13.iC();C14.setAlignment("TOPLEFT");C14.setColumn(C11);C14.setManage(C33);C14.setParent(C10);C14.setRow(C13);C14.setSizing("NONE");C14.iC();
C15.setColumn(C12);C15.setManage(C34);C15.setParent(C10);C15.setRow(C13);C15.setMarginRight(48);C15.iC();C16.iC();C17.setDisplayPosition(1);C17.setParent(C16);C17.iC();C18.setDisplayPosition(2);C18.setParent(C16);C18.setUnits("PIXELS");C18.setWidth(128);C18.iC();C19.setDisplayPosition(3);C19.setParent(C16);C19.setUnits("PIXELS");C19.setWidth(128);C19.iC();C20.setDisplayPosition(4);C20.setParent(C16);C20.iC();C21.setDisplayPosition(1);C21.setParent(C16);C21.setUnits("PIXELS");C21.setHeight(74);C21.iC();
C22.setDisplayPosition(2);C22.setParent(C16);C22.setUnits("PIXELS");C22.setHeight(128);C22.iC();C23.setDisplayPosition(3);C23.setParent(C16);C23.setUnits("PIXELS");C23.setHeight(128);C23.iC();C24.setDisplayPosition(4);C24.setParent(C16);C24.setHeight(1000);C24.iC();C25.setColumn(C19);C25.setManage(C38);C25.setParent(C16);C25.setRow(C23);C25.setMarginBottom(4);C25.setMarginLeft(4);C25.setMarginRight(4);C25.setMarginTop(4);C25.iC();C26.setColumn(C18);C26.setManage(C37);C26.setParent(C16);C26.setRow(C23);
C26.setMarginBottom(4);C26.setMarginLeft(4);C26.setMarginRight(4);C26.setMarginTop(4);C26.iC();C27.setColumn(C18);C27.setManage(C35);C27.setParent(C16);C27.setRow(C22);C27.setMarginBottom(4);C27.setMarginLeft(4);C27.setMarginRight(4);C27.setMarginTop(4);C27.iC();C28.setColumn(C19);C28.setManage(C36);C28.setParent(C16);C28.setRow(C22);C28.setMarginBottom(4);C28.setMarginLeft(4);C28.setMarginRight(4);C28.setMarginTop(4);C28.iC();C29.setAlignment("TOPLEFT");C29.setColumn(C18);C29.setManage(C39);C29.setParent(C16);
C29.setRow(C24);C29.setSizing("FITTOWIDTH");C29.setColumnSpan(2);C29.setMarginLeft(4);C29.setMarginTop(8);C29.iC();C30.setColumn(C5);C30.setManage(C31);C30.setParent(C4);C30.setRow(C7);C30.iC();C31.setParent(this);C31.setDisplayPosition(2);C31.setTabPosition(2);C31.setHeight(527);C31.setLeft(0);C31.setTop(48);C31.setWidth(382);C31.setVerticalScroll(true);C31.setLayoutManager(C16);C31.iC();C32.setParent(this);C32.setDisplayPosition(1);C32.setTabPosition(1);C32.setThemeDrawStyle("DarkTitle");C32.setHeight(48);
C32.setLeft(0);C32.setTop(0);C32.setWidth(382);C32.setLayoutManager(C10);C32.iC();C33.setDisplayPosition(1);C33.setIcon("arrow_back");C33.setLeft(0);C33.setParent(C32);C33.setTabPosition(1);C33.setTop(0);C33.iC();C34.setDisplayPosition(2);C34.setLeft(48);C34.setParent(C32);C34.setTabPosition(2);C34.setThemeDrawStyle("Heading2");C34.setTop(0);C34.setHeight(48);C34.setWidth(286);C34.setCaptionAlignment("CENTER");C34.setWordWrap(true);C34.setCaption("Capture Image");C34.iC();C35.setCaption("Capture Photo");
C35.setDisplayPosition(1);C35.setLeft(67);C35.setParent(C31);C35.setTabPosition(1);C35.setTop(78);C35.setHeight(120);C35.setWidth(120);C35.setIcon("fa-camera");C35.setIconAlignment("ABOVECAPTION");C35.setIconHeight(32);C35.setWordWrap(true);C35.setThemeDrawStyle("DarkTitle");C35.setTabStop(false);C35.setStyle(C2);C35.iC();C36.setCaption("Capture Video");C36.setDisplayPosition(2);C36.setLeft(195);C36.setParent(C31);C36.setTabPosition(2);C36.setTop(78);C36.setHeight(120);C36.setWidth(120);C36.setIcon("fa-video-camera");
C36.setIconAlignment("ABOVECAPTION");C36.setIconHeight(32);C36.setWordWrap(true);C36.setThemeDrawStyle("DarkTitle");C36.setTabStop(false);C36.setStyle(C2);C36.iC();C37.setCaption("Select from Images");C37.setDisplayPosition(3);C37.setLeft(67);C37.setParent(C31);C37.setTabPosition(3);C37.setTop(206);C37.setHeight(120);C37.setWidth(120);C37.setIcon("image");C37.setIconAlignment("ABOVECAPTION");C37.setIconHeight(32);C37.setWordWrap(true);C37.setThemeDrawStyle("DarkTitle");C37.setTabStop(false);C37.setStyle(C2);
C37.iC();C38.setCaption("Annotate Image");C38.setDisplayPosition(4);C38.setLeft(195);C38.setParent(C31);C38.setTabPosition(4);C38.setTop(206);C38.setHeight(120);C38.setWidth(120);C38.setIcon("fa-edit");C38.setIconAlignment("ABOVECAPTION");C38.setIconHeight(32);C38.setWordWrap(true);C38.setThemeDrawStyle("DarkTitle");C38.setTabStop(false);C38.setStyle(C2);C38.iC();C39.setCaption("Save to device");C39.setDisplayPosition(5);C39.setLeft(67);C39.setParent(C31);C39.setTabPosition(5);C39.setTop(338);C39.setWidth(252);
C39.setChecked(true);C39.setIconColor("THEME700");C39.setHeight(39);C39.setCaptionMarginLeft(12);C39.iC();C40.iC();C41.iC();C42.iC();C43.iC();C44.iC();C45.iC();C46.iC();C33.aH("CLICK",this,e8);C35.aH("CLICK",this,e2);C36.aH("CLICK",this,e3);C37.aH("CLICK",this,e4);C38.aH("CLICK",this,e5);C40.aH("INITIALIZE",this,e1);C40.aH("COMPLETED",this,e6);C41.aH("COMPLETED",this,e7);this.setHeight(577);this.setWidth(384);this.setLayoutManager(C4);this.setPlacement("FULLSCREEN");this.setStyle(C0);this.setAutoClose(true);
}});function e1(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#Camera.Initialize",83);r.ln=83;{r.ln=85;m.CAMERAINITIALISED.set(true);}r.ln=87;r.e();};function e2(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#ButtonPhoto.Click",89);r.ln=89;{r.ln=91;cO.mthCAPTUREPICTURE.call(this,m.SWITCHSAVETODEVICE.getChecked());}r.ln=93;r.e();};function e3(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#ButtonVideo.Click",95);r.ln=95;{r.ln=97;cO.mthCAPTUREVIDEO.call(this,m.SWITCHSAVETODEVICE.getChecked());}r.ln=99;r.e();};function e4(sender,Ps)
{var r=l.eR(this,cO,"#ButtonGallery.Click",101);r.ln=101;{r.ln=103;this.mthSELECTFROMGALLERY();}r.ln=105;r.e();};function e5(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#ButtonAnnotate.Click",107);r.ln=107;{r.ln=109;cO.mthANNOTATEIMAGE.call(this,m.SWITCHSAVETODEVICE.getChecked());}r.ln=111;r.e();};function e6(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#Camera.Completed",113);var P0=Ps.r("MESSAGE");var P1=Ps.r("STATUS");r.ln=113;{r.ln=115;if(l.s.eq(P1.get(),"OK")){r.ln=117;if(l.tB(l.s.eq(m.MIMETYPE.get(),"image/png")))
{r.ln=119;{var eP=l.ePs();eP.cR("FILE","PRIM_STR");eP.cR("BASE64DATA","PRIM_STR");eP.cR("MIMETYPE","PRIM_STR");eP.r("FILE").set(m.CAMERA.getOUTPUTFILE());eP.r("BASE64DATA").set(m.CAMERA.getIMAGEASBASE64DATA());eP.r("MIMETYPE").set(m.MIMETYPE.get());this.fE("COMPLETE",eP);eP.e();}}else{r.ln=123;cO.mthGETFILEBASE64.call(this,m.CAMERA.getOUTPUTFILE());}}else{r.ln=129;{var eP=l.ePs();eP.cR("RESULT","PRIM_STR");eP.r("RESULT").set(l.s.Substitute("Camera failed: &1 &2",P1.get(),P0.get()));this.fE("FAILED",eP);
eP.e();}}}r.ln=133;r.e();};function e7(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#FileRead.Completed",135);var P0=Ps.r("DATA");var P1=Ps.r("MESSAGE");var P2=Ps.r("STATUS");r.ln=135;{r.ln=137;if(l.s.eq(P2.get(),"OK")){r.ln=139;{var eP=l.ePs();eP.cR("FILE","PRIM_STR");eP.cR("BASE64DATA","PRIM_STR");eP.cR("MIMETYPE","PRIM_STR");eP.r("FILE").set(m.CAMERA.getOUTPUTFILE());eP.r("BASE64DATA").set(P0.get());eP.r("MIMETYPE").set(m.MIMETYPE.get());this.fE("COMPLETE",eP);eP.e();}}else{r.ln=143;{var eP=l.ePs();
eP.cR("RESULT","PRIM_STR");eP.r("RESULT").set(l.s.Substitute("Camera failed: &1 &2",P2.get(),P1.get()));this.fE("FAILED",eP);eP.e();}}}r.ln=147;r.e();};function e8(sender,Ps){var r=l.eR(this,cO,"#IconBack.Click",149);r.ln=149;{r.ln=151;this.mthCLOSE();}r.ln=153;r.e();};cO.mthCAPTUREPICTURE=function(p0){var m=this.REF,r=l.mR(this,cO,"CapturePicture",159);var P0=r.cP("SAVEIMAGETOGALLERY","PRIM_BOLN");P0.set(p0);r.ln=159;{r.ln=162;m.MIMETYPE.set("image/png");r.ln=164;cO.mthACTIVATEDEVICECAMERA.call(this,"CAM",true,false,false,P0.get());
}r.ln=166;r.e();};cO.mthCAPTUREVIDEO=function(p0){var m=this.REF,r=l.mR(this,cO,"CaptureVideo",168);var P0=r.cP("SAVEIMAGETOGALLERY","PRIM_BOLN");P0.set(p0);r.ln=168;{r.ln=171;m.MIMETYPE.set("video/mp4");r.ln=173;cO.mthACTIVATEDEVICECAMERA.call(this,"CAM",false,true,false,P0.get());}r.ln=175;r.e();};cO.mthSELECTFROMGALLERY=function(){var m=this.REF,r=l.mR(this,cO,"SelectFromGallery",177);r.ln=177;{r.ln=179;m.MIMETYPE.set("image/png");r.ln=181;cO.mthACTIVATEDEVICECAMERA.call(this,"LIB",true,true,false,false);
}r.ln=183;r.e();};cO.mthANNOTATEIMAGE=function(p0){var m=this.REF,r=l.mR(this,cO,"AnnotateImage",185);var P0=r.cP("SAVEIMAGETOGALLERY","PRIM_BOLN");P0.set(p0);r.ln=185;{r.ln=188;m.MIMETYPE.set("image/png");r.ln=190;cO.mthACTIVATEDEVICECAMERA.call(this,"CAM",true,false,true,P0.get());}r.ln=192;r.e();};cO.mthACTIVATEDEVICECAMERA=function(p0,p1,p2,p3,p4){var m=this.REF,r=l.mR(this,cO,"ActivateDeviceCamera",194);var P0=r.cP("SOURCE","PRIM_STR");var P1=r.cP("ENABLEIMAGE","PRIM_BOLN");var P2=r.cP("ENABLEVIDEO","PRIM_BOLN");
var P3=r.cP("ENABLEANNOTATION","PRIM_BOLN");var P4=r.cP("SAVETOGALLERY","PRIM_BOLN");P0.set(p0);P1.set(p1);P2.set(p2);P3.set(p3);P4.set(p4);var C0=r.cR("VIDEOQUALITY","PRIM_STR");C0.iC();r.ln=194;{r.ln=203;m.CAMERA.setSOURCE(P0.get());m.CAMERA.setENABLEIMAGE(P1.get());m.CAMERA.setENABLEVIDEO(P2.get());m.CAMERA.setENABLEANNOTATION(P3.get());m.CAMERA.setSAVETOPHOTOGALLERY(P4.get());m.CAMERA.setRETURNFILE(true);m.CAMERA.setRETURNBASE64STRING(true);r.ln=205;if(l.tB(P2.get())){r.ln=207;{var eP=l.ePs();
eP.cR("VIDEOQUALITY","PRIM_STR");this.fE("SETTINGVIDEOQUALITY",eP);C0.set(eP.r("VIDEOQUALITY").get());eP.e();}r.ln=208;m.CAMERA.setVIDEOQUALITY(C0.get());}r.ln=212;if(l.tB(m.CAMERAINITIALISED.get())){r.ln=214;this.mthCALCULATEDIMENSIONS();r.ln=215;m.CAMERA.mthACTIVATECAMERA();}else{r.ln=219;{var eP=l.ePs();eP.cR("RESULT","PRIM_STR");eP.r("RESULT").set("Camera cannot be initialized. This application must be run in LANSA Mobile");this.fE("FAILED",eP);eP.e();}}}r.ln=223;r.e();};cO.mthCALCULATEDIMENSIONS=function()
{var m=this.REF,r=l.mR(this,cO,"CalculateDimensions",225);var C0=r.cR("TOTALPIXELS","PRIM_NMBR");var C1=r.cR("MEGAPIXELS","PRIM_NMBR");C0.iC();C1.iC();r.ln=225;{r.ln=230;{var eP=l.ePs();eP.cR("MEGAPIXELS","PRIM_NMBR");this.fE("SETTINGMEGAPIXELS",eP);C1.set(eP.r("MEGAPIXELS").get());eP.e();}r.ln=232;C0.set(l.n.Sqrt(l.n.AsFloat(l.div(l.mul(C1.get(),1000000),12))));r.ln=234;if(l.n.gt(l.WEB().getWebPage().getHeight(),l.WEB().getWebPage().getWidth())){r.ln=236;m.IMAGEHEIGHT.set(l.mul(C0.get(),4));r.ln=237;
m.IMAGEWIDTH.set(l.mul(C0.get(),3));r.ln=238;m.CAMERA.mthSETIMAGESIZE("PORT",m.IMAGEWIDTH.get(),m.IMAGEHEIGHT.get());r.ln=239;m.CAMERA.mthSETBASE64IMAGESIZE("PORT",m.IMAGEWIDTH.get(),m.IMAGEHEIGHT.get());}else{r.ln=243;m.IMAGEWIDTH.set(l.mul(C0.get(),4));r.ln=244;m.IMAGEHEIGHT.set(l.mul(C0.get(),3));r.ln=245;m.CAMERA.mthSETIMAGESIZE("LAND",m.IMAGEWIDTH.get(),m.IMAGEHEIGHT.get());r.ln=246;m.CAMERA.mthSETBASE64IMAGESIZE("LAND",m.IMAGEWIDTH.get(),m.IMAGEHEIGHT.get());}}r.ln=250;r.e();};cO.mthGETFILEBASE64=function(p0)
{var m=this.REF,r=l.mR(this,cO,"GetFileBase64",252);var P0=r.cP("FILEPATH","PRIM_STR");P0.set(p0);r.ln=252;{r.ln=255;m.FILEREAD.setFILENAME(P0.get());r.ln=256;m.FILEREAD.setFILETYPE("BIN");r.ln=257;m.FILEREAD.setDATAENCODING("BASE64");r.ln=258;m.FILEREAD.mthREAD();}r.ln=260;r.e();};cO.getCAMERAINITIALIZED=function(){return this.REF.CAMERAINITIALISED.get();};},{rc:["XDEVICE04","XDEVICE06"],rp:["PRIM_DLG","PRIM_VS.Style","PRIM_VS.SolidBrush","PRIM_TBLO","PRIM_TBLO.Column","PRIM_TBLO.Row","PRIM_TBLO.Item","PRIM_PANL","PRIM_MD.Icon","PRIM_MD.Label","PRIM_MD.ActionButton","PRIM_MD.Switch","PRIM_NMBR","PRIM_BOLN","PRIM_STR"],
dp:["PRIM_STR","PRIM_NMBR"]});