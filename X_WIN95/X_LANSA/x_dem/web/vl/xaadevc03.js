LANSA.addComponent({id:"XAADEVC03",nm:"xAccAssessorRecordingAndPlayback",ot:"rp",tp:"Reusable Part",de:" Record & Playback Control",tl:14020004},function(l,oI,u){var cO=l.rC(oI,{an:"PRIM_OBJT",mt:{Record:{},Stop:{},Playback:{ps:{"AudioFileInput":{pt:"i"}}}},ev:{Failed:{},PlaybackCompleted:{},RecordingCompleted:{ps:{"AudioFileOutputPath":{pt:"i"},"Base64Data":{pt:"i"},"MimeType":{pt:"i"}}}},co:function(){cO.aN.call(this);var C0=this.cR("AUDIORECORDCONTROL","XDEVICE01");var C1=this.cR("AUDIOPLAYBACKCONTROL","XDEVICE02");
var C2=this.cR("DEVICEREADFILEDATA","XAAOBJ06");var C3=this.cR("RECORDERINITIALIZED","PRIM_BOLN");var C4=this.cR("PLAYBACKINITIALIZED","PRIM_BOLN");var C5=this.cR("RECORDINGINPROGRESS","PRIM_BOLN");var C6=this.cR("PLAYBACKINPROGRESS","PRIM_BOLN");var C7=this.cR("MIMETYPE","PRIM_ALPH");var C8=this.cA("DATA","XAAOBJ01");var C9=this.cA("APPLICATIONCONTROL","XAAOBJ02");var C10=this.cA("APPLICATIONSETTINGS","XAAOBJ08");C0.setCHANNELS(1);C0.iC();C1.iC();C2.iC();C3.iC();C4.iC();C5.iC();C6.iC();C7.setValue("audio/mpeg");
C7.iC();if((C8!=null)&&(C8.iI()==false)){C8.iC();}if((C9!=null)&&(C9.iI()==false)){C9.iC();}if((C10!=null)&&(C10.iI()==false)){C10.iC();}C0.aH("INITIALIZE",this,e1);C0.aH("COMPLETED",this,e3);C1.aH("INITIALIZE",this,e2);C1.aH("COMPLETED",this,e4);C1.aH("STOPPED",this,e4);C2.aH("COMPLETED",this,e5);}});function e1(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#AudioRecordControl.Initialize",42);r.ln=42;{r.ln=44;m.RECORDERINITIALIZED.set(true);r.ln=46;m.MIMETYPE.set("audio/mpeg");}r.ln=48;r.e();};function e2(sender,Ps)
{var m=this.REF,r=l.eR(this,cO,"#AudioPlaybackControl.Initialize",50);r.ln=50;{r.ln=52;m.PLAYBACKINITIALIZED.set(true);}r.ln=54;r.e();};function e3(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#AudioRecordControl.Completed",56);r.ln=56;{r.ln=58;m.RECORDINGINPROGRESS.set(false);r.ln=60;m.DEVICEREADFILEDATA.mthGETFILEBASE64(m.AUDIORECORDCONTROL.getFILE());}r.ln=62;r.e();};function e4(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#AudioPlaybackControl.Completed #AudioPlaybackControl.Stopped",64);r.ln=64;{r.ln=66;
this.fE("PLAYBACKCOMPLETED");r.ln=68;m.PLAYBACKINPROGRESS.set(false);}r.ln=70;r.e();};function e5(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#DeviceReadFileData.Completed",72);var P0=Ps.r("DATA");var P1=Ps.r("MESSAGE");var P2=Ps.r("STATUS");r.ln=72;{r.ln=74;if(l.tB(l.s.eq(P2.get(),"OK"))){r.ln=76;{var eP=l.ePs();eP.cR("AUDIOFILEOUTPUTPATH","PRIM_ALPH");eP.cR("BASE64DATA","PRIM_ALPH");eP.cR("MIMETYPE","PRIM_ALPH");eP.r("AUDIOFILEOUTPUTPATH").set(m.AUDIORECORDCONTROL.getFILE());eP.r("BASE64DATA").set(P0.get());
eP.r("MIMETYPE").set(m.MIMETYPE.get());this.fE("RECORDINGCOMPLETED",eP);eP.e();}}}r.ln=80;r.e();};cO.mthRECORD=function(){var m=this.REF,r=l.mR(this,cO,"Record",88);r.ln=88;{r.ln=90;if(l.tB(m.RECORDERINITIALIZED.get())){r.ln=92;m.AUDIORECORDCONTROL.setFILE(m.APPLICATIONSETTINGS.ref.getAUDIOFILENAME());r.ln=94;m.AUDIORECORDCONTROL.setCOMPRESSIONLEVEL(m.APPLICATIONSETTINGS.ref.getAUDIOFILECOMPRESSION());r.ln=96;m.RECORDINGINPROGRESS.set(true);r.ln=98;m.AUDIORECORDCONTROL.mthRECORD();}else{r.ln=102;
this.fE("FAILED");}}r.ln=106;r.e();};cO.mthSTOP=function(){var m=this.REF,r=l.mR(this,cO,"Stop",108);r.ln=108;{r.ln=110;if(l.tB(m.RECORDINGINPROGRESS.get())){r.ln=112;m.AUDIORECORDCONTROL.mthSTOP();}r.ln=116;if(l.tB(m.PLAYBACKINPROGRESS.get())){r.ln=118;m.AUDIOPLAYBACKCONTROL.mthSTOP();}}r.ln=122;r.e();};cO.mthPLAYBACK=function(p0){var m=this.REF,r=l.mR(this,cO,"Playback",124);var P0=r.cP("AUDIOFILEINPUT","PRIM_ALPH");P0.set(p0);r.ln=124;{r.ln=127;if(l.tB(m.PLAYBACKINITIALIZED.get())){r.ln=129;m.AUDIOPLAYBACKCONTROL.setFILE(P0.get());
r.ln=131;m.PLAYBACKINPROGRESS.set(true);r.ln=133;m.AUDIOPLAYBACKCONTROL.mthPLAY();}else{r.ln=137;this.fE("FAILED");}}r.ln=141;r.e();};},{rc:["XDEVICE01","XDEVICE02","XAAOBJ06","XAAOBJ01","XAAOBJ02","XAAOBJ08"],rp:["PRIM_OBJT","PRIM_BOLN","PRIM_ALPH"]});