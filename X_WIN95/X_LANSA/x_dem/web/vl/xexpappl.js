LANSA.addComponent({id:"XEXPAPPL",nm:"xEXPapplication",ot:"rp",tp:"Reusable Part",de:"Application Object",tl:14020004},function(l,oI,u){var cL="ENG";if((l.gCL()=="FRA")||(l.gCL()=="JPN")||(l.gCL()=="LLL")){cL=l.gCL();}var c1=l.cDA("1900-01-01");var Fd={F1:{nm:"XCONID",an:"xContactIdentification",ft:"I",ln:4,dc:0,lb:"Contact ID",h1:"Contact",h2:"ID",h3:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],de:"Contact ID",dv:0,ia:["FE","RB"]},F2:{nm:"STD_INT",ft:"I",ln:4,dc:0,ec:"J",lb:{"ENG":"Std Integer","FRA":"?","JPN":"?","LLL":"Std Integer"}[cL],
h1:{"ENG":"Standard","FRA":"?","JPN":"?","LLL":"Standard"}[cL],h2:{"ENG":"Integer","FRA":"?","JPN":"?","LLL":"Integer"}[cL],h3:{"ENG":"Field","FRA":"?","JPN":"?","LLL":"Field"}[cL],de:{"ENG":"Standard Integer field","FRA":"?","JPN":"?","LLL":"Standard Integer field"}[cL],dv:0,ia:["FE","RB"]},F3:{nm:"STD_FLAG",ft:"A",ln:1,dc:0,lb:{"ENG":"Flag","FRA":"Indicateur","JPN":"Flag","LLL":"Flag"}[cL],h1:{"ENG":"Flag","FRA":"Indicateur","JPN":"Flag","LLL":"Flag"}[cL],h2:" ",h3:" ",de:{"ENG":"Standard FLAG","FRA":"Indicateur Standard","JPN":"Standard FLAG","LLL":"Standard FLAG"}[cL],
dv:"",ia:["FE"]},F4:{nm:"XEXPHID",an:"xExpenseID",ft:"I",ln:4,dc:0,lb:"Expense Identif",h1:"Expense",h2:"Identification",h3:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],de:"Expense Identification",dv:0,ia:["FE","RB"]},F5:{nm:"XEXPSTS",an:"xExpenseStatus",ft:"A",ln:10,dc:0,lb:"Status",h1:"Status",h2:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],h3:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],de:"Status",dv:"",ia:["FE","LC"]},F6:{nm:"XEXPENSET",an:"xExpenseTotal",ft:"P",ln:7,dc:2,ec:"1",lb:{"ENG":"Expense Total","FRA":"Unit Price","JPN":"Expense Total","LLL":"Expense Total"}[cL],
h1:{"ENG":"Expense Total","FRA":"Unit","JPN":"Expense Total","LLL":"Expense Total"}[cL],h2:{"ENG":" ","FRA":"Price","JPN":"","LLL":""}[cL],h3:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],de:{"ENG":"Expense Total","FRA":"Unit Price","JPN":"Expense Total","LLL":"Expense Total"}[cL],dv:0,ia:["FE","RB"]},F7:{nm:"XEXPDATE",an:"xExpenseDate",ft:"D",ln:10,dc:0,lb:"Date",h1:"Date",h2:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],h3:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],de:"Date",dv:c1,ia:["ASQN","FE","ISO"]
},F8:{nm:"XMERCNAME",an:"xMerchantName",ft:"NV",ln:100,dc:0,lb:"Name",h1:"Name",h2:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],h3:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],de:"Name",dv:"",ia:["FE","LC"]},F9:{nm:"XCATEDESC",an:"xCategoryDescription",ft:"NV",ln:100,dc:0,lb:"Description",h1:"Description",h2:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],h3:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],de:"Description",dv:"",ia:["FE","LC"]},F10:{nm:"XEXPITMID",an:"xExpenseItemID",ft:"I",ln:4,dc:0,lb:"Item ID",
h1:"Item",h2:"ID",h3:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],de:"Item ID",dv:0,ia:["FE","RB"]},F11:{nm:"STD_AMNT",ft:"P",ln:9,dc:2,ec:"A",lb:{"ENG":"Amount","FRA":"Montant","JPN":"Amount","LLL":"Amount"}[cL],h1:{"ENG":"Amount","FRA":"Montant","JPN":"Amount","LLL":"Amount"}[cL],h2:" ",h3:" ",de:{"ENG":"Standard AMOUNT","FRA":"Montant Standard","JPN":"Standard AMOUNT","LLL":"Standard AMOUNT"}[cL],dv:0,ia:["FE","RB"]},F12:{nm:"XEXPNOTES",an:"xExpenseItemNotes",ft:"NV",ln:2000,dc:0,lb:"Notes",h1:"Notes",
h2:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],h3:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],de:"Notes",dv:"",ia:["FE","LC"]},F13:{nm:"XEXPENSED",an:"xExpenseDateSubmitted",ft:"DT",ln:26,dc:0,lb:{"ENG":"Date Submitted","FRA":"Date","JPN":"Date Submitted","LLL":"Date Submitted"}[cL],h1:{"ENG":"Date Submitted","FRA":"Date","JPN":"Date Submitted","LLL":"Date Submitted"}[cL],h2:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],h3:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],de:{"ENG":"Date Submitted","FRA":"Date","JPN":"Date Submitted","LLL":"Date Submitted"}[cL],
dv:l.SqlNull,ia:["ASQN","FE","ISO","SUTC"]},F14:{nm:"XEXPENSEA",an:"xExpenseDateApproved",ft:"DT",ln:26,dc:0,lb:{"ENG":"Date Approved","FRA":"Date","JPN":"Date Approved","LLL":"Date Approved"}[cL],h1:{"ENG":"Date Approved","FRA":"Date","JPN":"Date Approved","LLL":"Date Approved"}[cL],h2:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],h3:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],de:{"ENG":"Date Approved","FRA":"Date","JPN":"Date Approved","LLL":"Date Approved"}[cL],dv:l.SqlNull,ia:["ASQN","FE","ISO","SUTC"]
},F15:{nm:"XEXPDESC",an:"xExpenseDescription",ft:"NV",ln:50,dc:0,lb:{"ENG":"Description","FRA":"Notes","JPN":"Description","LLL":"Description"}[cL],h1:{"ENG":"Description","FRA":"Notes","JPN":"Description","LLL":"Description"}[cL],h2:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],h3:{"ENG":" ","FRA":" ","JPN":"","LLL":""}[cL],de:{"ENG":"Description","FRA":"Notes","JPN":"Description","LLL":"Description"}[cL],dv:"",ia:["FE","LC"]},F16:{nm:"RETURNCODE",ft:"A",ln:2,dc:0,lb:"returncode",h1:"returncode",h2:"",
h3:"",de:"returncode",dv:""}};var cO=l.rC(oI,{an:"PRIM_OBJT",fd:Fd,pt:{Expenses:{da:"r"},uSorting:{da:"r"},uMyExpensesLoaded:{da:"r"},uHistoryExpensesLoaded:{da:"r"},uContactAsManager:{da:"rw"},uContactId:{da:"rw"},uNumberOfDetails:{da:"rw"},uShowingExpenses:{da:"rw"}},mt:{uLoadExpenses:{},uLoadAsManager:{},uLoadNewExpenses:{},uLoadExpenseHistory:{},uSubmitExpense:{ps:{"ExpenseDescription":{pt:"i"},"ExpenseId":{pt:"i"}}},uFindAll:{ps:{"Result":{pt:"i"}}},uFind:{ps:{"Result":{pt:"i"},"Text":{pt:"i"
}}},ClearSearch:{},Search:{ps:{"Text":{pt:"i"}}},EnterSearchMode:{},LeaveSearchMode:{},CreateExpense:{}},ev:{LoginFailed:{},LoginCompleted:{},LogoutCompleted:{},SearchModeOn:{},SearchModeOff:{},SearchCleared:{},SearchCompleted:{ps:{"Results":{pt:"i"}}},FilterOn:{ps:{"Filter":{pt:"i"},"Counter":{pt:"io"}}},FilterOff:{},uRefreshMyExpenses:{ps:{"SortCriteria":{pt:"i"}}},uRefreshHistoryExpenses:{ps:{"SortCriteria":{pt:"i"}}},uHistoryReady:{},uMyExpensesReady:{},uExpensesFailedToLoad:{},uExpenseSubmitted:
{ps:{"Returncode":{pt:"i"}}}},co:function(){cO.aN.call(this);var f=this.aF("XEXPAPPL",Fd);var C0=this.cR("EXPENSES","PRIM_LCOL");var C1=this.cR("SORTING","PRIM_ALPH");var C2=this.cR("MYEXPENSESLOADED","PRIM_BOLN");var C3=this.cR("HISTORYEXPENSESLOADED","PRIM_BOLN");var C4=this.cR("CONTACTASMANAGER","PRIM_BOLN");var C5=this.cF("CONTACTID",Fd.F1.Dc);var C6=this.cF("NUMBEROFDETAILS",Fd.F2.Dc);var C7=this.cF("SHOWINGEXPENSES",Fd.F3.Dc);var C8=this.cR("CREATEEXPENSEDIALOG","XEXPCREAT");C0.setCollects("XEXPOBJE");
C0.iC();C1.setValue("date");C1.iC();C2.iC();C3.iC();C4.iC();C5.aD();C5.iC();C6.aD();C6.iC();C7.aD();C7.iC();C8.iC();C0.aLF({"XEXPHID":f.F4,"XEXPSTS":f.F5,"XEXPENSET":f.F6,"XEXPDATE":f.F7,"XMERCNAME":f.F8,"XCATEDESC":f.F9,"XEXPITMID":f.F10,"STD_AMNT":f.F11,"XEXPNOTES":f.F12,"XEXPENSED":f.F13,"XEXPENSEA":f.F14,"XEXPDESC":f.F15});}});cO.mthSETSORTING=function(p0){var m=this.REF,r=l.pR(this,cO,"SetSorting",62);var P0=r.cP("SORTCRITERIA","PRIM_ALPH");P0.set(p0);r.ln=62;{r.ln=66;m.SORTING.set(P0.get());
r.ln=68;{var v1=this.getUSHOWINGEXPENSES();if(r.ln=70,l.s.eq(v1,"N")){r.ln=71;{var eP=l.ePs();eP.cR("SORTCRITERIA","PRIM_ALPH");eP.r("SORTCRITERIA").set(P0.get());this.fE("UREFRESHMYEXPENSES",eP);eP.e();}}else if(r.ln=73,l.s.eq(v1,"H")){r.ln=74;{var eP=l.ePs();eP.cR("SORTCRITERIA","PRIM_ALPH");eP.r("SORTCRITERIA").set(P0.get());this.fE("UREFRESHHISTORYEXPENSES",eP);eP.e();}}r.ln=76;}}r.ln=79;r.e();};cO.mthULOADEXPENSES=function(){var r=l.mR(this,cO,"uLoadExpenses",82);r.ln=82;{r.ln=84;if(this.getUCONTACTASMANAGER())
{r.ln=86;this.mthULOADASMANAGER();}else{r.ln=90;if(l.s.eq(this.getUSHOWINGEXPENSES(),"N")){r.ln=92;if(l.b.Not(this.getUMYEXPENSESLOADED())){r.ln=93;this.mthULOADNEWEXPENSES();}else{r.ln=95;this.fE("UMYEXPENSESREADY");}}else{r.ln=98;if(l.b.Not(this.getUHISTORYEXPENSESLOADED())){r.ln=99;this.mthULOADEXPENSEHISTORY();}}}}r.ln=106;r.e();};cO.mthULOADASMANAGER=function(){var m=this.REF,r=l.mR(this,cO,"uLoadAsManager",108),mth=r;var C0=r.cDR("LOADEXPENSES","XEXPSERVE","LOADEXPENSES");C0.iC();C0.aH("COMPLETED",this,e1);
C0.aH("FAILED",this,e2);r.ln=108;{r.ln=112;C0.mthEXECUTEASYNC({},{LIST:{"EXPENSELIST":m.EXPENSES}});}r.ln=126;r.e();function e1(sender,Ps){var r=l.eR(this,cO,"#LoadExpenses.Completed",114,mth);r.ln=114;{}r.ln=118;r.e();}function e2(sender,Ps){var r=l.eR(this,cO,"#LoadExpenses.Failed",120,mth);r.ln=120;{r.ln=122;l.MSGQ().mthADD(l.cat(l.cat("Expenses as contact id ",l.n.AsString(m.CONTACTID.get()))," failed to load"),u);r.ln=123;this.fE("UEXPENSESFAILEDTOLOAD");}r.ln=125;r.e();}};cO.mthULOADNEWEXPENSES=function()
{var m=this.REF,r=l.mR(this,cO,"uLoadNewExpenses",129),mth=r;var C0=r.cDR("LOADEXPENSES","XEXPSERVE","GETNEWUSEREXPENSES");C0.iC();C0.aH("COMPLETED",this,e3);C0.aH("FAILED",this,e4);r.ln=129;{r.ln=133;if(this.getUMYEXPENSESLOADED()){r.ln=134;this.fE("UMYEXPENSESREADY");r.e();return;}r.ln=138;C0.mthEXECUTEASYNC({FLD:{"CONTACTID":m.CONTACTID.get()}},{LIST:{"EXPENSELIST":m.EXPENSES}});}r.ln=156;r.e();function e3(sender,Ps){var r=l.eR(this,cO,"#LoadExpenses.Completed",140,mth);r.ln=140;{r.ln=142;m.MYEXPENSESLOADED.set(true);
r.ln=143;m.HISTORYEXPENSESLOADED.set(false);r.ln=144;m.NUMBEROFDETAILS.set(m.EXPENSES.getItemCount());r.ln=145;this.fE("UMYEXPENSESREADY");}r.ln=147;r.e();}function e4(sender,Ps){var r=l.eR(this,cO,"#LoadExpenses.Failed",149,mth);r.ln=149;{r.ln=151;l.MSGQ().mthADD(l.cat(l.cat("Expenses as contact id ",l.n.AsString(m.CONTACTID.get()))," failed to load"),u);r.ln=152;this.fE("UEXPENSESFAILEDTOLOAD");}r.ln=154;r.e();}};cO.mthULOADEXPENSEHISTORY=function(){var m=this.REF,r=l.mR(this,cO,"uLoadExpenseHistory",159),mth=r;
var C0=r.cDR("LOADEXPENSES","XEXPSERVE","GETEXPENSEHISTORY");C0.iC();C0.aH("COMPLETED",this,e5);C0.aH("FAILED",this,e6);r.ln=159;{r.ln=163;if(this.getUHISTORYEXPENSESLOADED()){r.ln=164;this.fE("UHISTORYREADY");r.e();return;}r.ln=168;C0.mthEXECUTEASYNC({FLD:{"CONTACTID":m.CONTACTID.get()}},{LIST:{"EXPENSELIST":m.EXPENSES}});}r.ln=185;r.e();function e5(sender,Ps){var r=l.eR(this,cO,"#LoadExpenses.Completed",170,mth);r.ln=170;{r.ln=172;m.MYEXPENSESLOADED.set(false);r.ln=173;m.HISTORYEXPENSESLOADED.set(true);
r.ln=174;this.fE("UHISTORYREADY");}r.ln=176;r.e();}function e6(sender,Ps){var r=l.eR(this,cO,"#LoadExpenses.Failed",178,mth);r.ln=178;{r.ln=180;l.MSGQ().mthADD(l.cat(l.cat("Expenses as contact id ",l.n.AsString(m.CONTACTID.get()))," failed to load"),u);r.ln=181;this.fE("UEXPENSESFAILEDTOLOAD");}r.ln=183;r.e();}};cO.mthUSUBMITEXPENSE=function(p0,p1){var f=this.FLD.XEXPAPPL,r=l.mR(this,cO,"uSubmitExpense",187),mth=r;var P0=r.cP("EXPENSEDESCRIPTION","PRIM_DC","UnicodeString");var P1=r.cPF("EXPENSEID",Fd.F4.Dc);
P0.set(p0);P1.set(p1);var C0=r.cDR("SUBMITEXPENSE","XEXPSERVE","SUBMITEXPENSE");C0.iC();C0.aH("COMPLETED",this,e7);C0.aH("FAILED",this,e8);r.ln=187;{r.ln=194;C0.mthEXECUTEASYNC({FLD:{"XEXPDESC":P0.get(),"XEXPHID":P1.get()}},{FLD:{"RETURNCODE":f.F16}});}r.ln=208;r.e();function e7(sender,Ps){var r=l.eR(this,cO,"#SubmitExpense.Completed",196,mth);r.ln=196;{r.ln=198;{var eP=l.ePs();eP.cR("RETURNCODE","PRIM_ALPH");eP.r("RETURNCODE").set(f.F16.get());this.fE("UEXPENSESUBMITTED",eP);eP.e();}}r.ln=200;r.e();
}function e8(sender,Ps){var r=l.eR(this,cO,"#SubmitExpense.Failed",202,mth);r.ln=202;{r.ln=204;l.WEB().mthALERT("Submit expense failed");}r.ln=206;r.e();}};cO.mthUFINDALL=function(p0){var m=this.REF,r=l.mR(this,cO,"uFindAll",210);var P0=r.cPD("RESULT");P0=p0;r.ln=210;{r.ln=213;P0.mthREMOVEALL();r.ln=215;{var l1=m.EXPENSES.cI();while(l1.step()){var EXPENSE=r.sR("EXPENSE",l1.item());r.ln=217;P0.mthINSERT(EXPENSE);r.ln=219;}l1.end();r.dR("EXPENSE");}}r.ln=221;r.e();};cO.mthUFIND=function(p0,p1){var m=this.REF,r=l.mR(this,cO,"uFind",223);
var P0=r.cPD("RESULT");var P1=r.cP("TEXT","PRIM_DC","UnicodeString");P0=p0;P1.set(p1);r.ln=223;{r.ln=227;P0.mthREMOVEALL();r.ln=229;{var l1=m.EXPENSES.cI();while(l1.step()){var EXPENSE=r.sR("EXPENSE",l1.item());r.ln=231;if(EXPENSE.mthCONTAINSTEXT(P1.get())){r.ln=233;P0.mthINSERT(EXPENSE);}r.ln=237;}l1.end();r.dR("EXPENSE");}}r.ln=239;r.e();};cO.mthCLEARSEARCH=function(){var r=l.mR(this,cO,"ClearSearch",241);r.ln=241;{r.ln=243;this.fE("SEARCHCLEARED");}r.ln=245;r.e();};cO.mthSEARCH=function(p0){var r=l.mR(this,cO,"Search",247);
var P0=r.cP("TEXT","PRIM_DC","UnicodeString");P0.set(p0);var C0=r.cF("COUNTER",Fd.F2.Dc);C0.iC();r.ln=247;{r.ln=251;if(l.n.gt(l.s.CurChars(l.s.Trim(P0.get())),0)){r.ln=253;{var eP=l.ePs();eP.cR("FILTER","PRIM_DC","UnicodeString");eP.cF("COUNTER",Fd.F2.Dc);eP.r("FILTER").set(l.s.UpperCase(l.s.Trim(P0.get())));eP.r("COUNTER").set(C0.get());this.fE("FILTERON",eP);C0.set(eP.r("COUNTER").get());eP.e();}r.ln=255;{var eP=l.ePs();eP.cF("RESULTS",Fd.F2.Dc);eP.r("RESULTS").set(C0.get());this.fE("SEARCHCOMPLETED",eP);
eP.e();}}}r.ln=259;r.e();};cO.mthENTERSEARCHMODE=function(){var r=l.mR(this,cO,"EnterSearchMode",261);r.ln=261;{r.ln=263;this.fE("SEARCHMODEON");}r.ln=265;r.e();};cO.mthLEAVESEARCHMODE=function(){var r=l.mR(this,cO,"LeaveSearchMode",267);r.ln=267;{r.ln=269;this.fE("FILTEROFF");r.ln=271;this.fE("SEARCHMODEOFF");}r.ln=273;r.e();};cO.mthCREATEEXPENSE=function(){var m=this.REF,r=l.mR(this,cO,"CreateExpense",275);r.ln=275;{r.ln=277;if(l.s.eq(l.WEB().getDevice(),"MOBILE")){r.ln=279;m.CREATEEXPENSEDIALOG.setPlacement("FULLSCREEN");
}else{r.ln=283;m.CREATEEXPENSEDIALOG.setPlacement("CENTER");}r.ln=287;m.CREATEEXPENSEDIALOG.mthSHOW();}r.ln=289;r.e();};cO.getEXPENSES=function(){return this.REF.EXPENSES;};cO.getUSORTING=function(){return this.REF.SORTING.get();};cO.setUSORTING=function(v){this.mthSETSORTING(v);};cO.getUMYEXPENSESLOADED=function(){return this.REF.MYEXPENSESLOADED.get();};cO.getUHISTORYEXPENSESLOADED=function(){return this.REF.HISTORYEXPENSESLOADED.get();};cO.getUCONTACTASMANAGER=function(){return this.REF.CONTACTASMANAGER.get();
};cO.setUCONTACTASMANAGER=function(v){this.REF.CONTACTASMANAGER.set(v);};cO.getUCONTACTID=function(){return this.REF.CONTACTID.get();};cO.setUCONTACTID=function(v){this.REF.CONTACTID.set(v);};cO.getUNUMBEROFDETAILS=function(){return this.REF.NUMBEROFDETAILS.get();};cO.setUNUMBEROFDETAILS=function(v){this.REF.NUMBEROFDETAILS.set(v);};cO.getUSHOWINGEXPENSES=function(){return this.REF.SHOWINGEXPENSES.get();};cO.setUSHOWINGEXPENSES=function(v){this.REF.SHOWINGEXPENSES.set(v);};{Fd.F1.Dc=function(){this.aN.call(this,Fd.F1);
};l.cFC({co:Fd.F1.Dc,an:"PRIM_FLD",fn:"XCONID"});}{Fd.F2.Dc=function(){this.aN.call(this,Fd.F2);};l.cFC({co:Fd.F2.Dc,an:"PRIM_FLD",fn:"STD_INT"});}{Fd.F3.Dc=function(){this.aN.call(this,Fd.F3);};l.cFC({co:Fd.F3.Dc,an:"PRIM_FLD",fn:"STD_FLAG"});}{Fd.F4.Dc=function(){this.aN.call(this,Fd.F4);};l.cFC({co:Fd.F4.Dc,an:"PRIM_FLD",fn:"XEXPHID"});}},{rc:["XEXPCREAT"],rp:["PRIM_OBJT","PRIM_LCOL","PRIM_ALPH","PRIM_BOLN","PRIM_FLD","PRIM_WEB.DataRequest","PRIM_MSGQ"],dc:["XEXPOBJE"]});